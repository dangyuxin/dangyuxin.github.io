<!DOCTYPE html><html lang="zh-CN" data-theme><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Dyxin - 学会与自己和解</title><meta name="author" content="dyx"><meta name="copyright" content="dyx"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="referrer" content="no-referrer"><meta property="og:type" content="website">
<meta property="og:title" content="Dyxin">
<meta property="og:url" content="http://dangyuxin.github.io/page/2/index.html">
<meta property="og:site_name" content="Dyxin">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://p3-pc.douyinpic.com/img/aweme-avatar/tos-cn-i-0813c001_oQVMIAnrIBEDAAPZbBAAQEAelfjxNss2b6F7Ef~c5_300x300.jpeg?from=2956013662">
<meta property="article:author" content="dyx">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://p3-pc.douyinpic.com/img/aweme-avatar/tos-cn-i-0813c001_oQVMIAnrIBEDAAPZbBAAQEAelfjxNss2b6F7Ef~c5_300x300.jpeg?from=2956013662"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://dangyuxin.github.io/page/2/index.html"><link rel="preconnect"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css?v=6.5.1"><link rel="stylesheet" href="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.css?v=5.0.33" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js?v=4.11.1',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Dyxin',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-05-05 02:54:01'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://p3-pc.douyinpic.com/img/aweme-avatar/tos-cn-i-0813c001_oQVMIAnrIBEDAAPZbBAAQEAelfjxNss2b6F7Ef~c5_300x300.jpeg?from=2956013662" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">49</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://dyx-bucket.oss-cn-beijing.aliyuncs.com/2e339a3a385a4fcb89e102016eb40b61.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Dyxin"><span class="site-name">Dyxin</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Dyxin</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/dangyuxin" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://www.douyin.com/user/MS4wLjABAAAAabKSuqKzuKHByiNDDVLzJrbfB-5yw67yU4_9_9HcEjM" target="_blank" title="Douyin"><i class="fab fa-tiktok" style="color: #24292e;"></i></a><a class="social-icon" href="https://space.bilibili.com/173312348?spm_id_from=333.337.0.0" target="_blank" title="Bilibili"><i class="fab fa-bilibili" style="color: #24292e;"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/count%E6%80%A7%E8%83%BD.html" title="count性能">count性能</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-12-24T06:01:29.000Z" title="发表于 2023-12-24 14:01:29">2023-12-24</time></span></div><div class="content">count性能counit(*) &#x3D; count(1) &gt; count(主键字段) &gt; count(字段)
count(1)、 count(*)、 count(主键字段)执行时，如果表里存在二级索引，优化器就会选择二级索引进行扫描。
所以，如果要执行 count(1)、 count(*)、 count(主键字段) 时，尽量在数据表上建立二级索引，这样优化器会自动采用 key_len 最小的二级索引进行扫描，相比于扫描主键索引效率会高些。
不要使用 count(字段) 来统计记录个数：效率最差，会采用全表扫描的方式来统计。如果你非要统计表中该字段不为NULL的记录个数，建议给这个字段建一个二级索引。
</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/MySQL%E6%89%A7%E8%A1%8C%E4%B8%80%E6%9D%A1update%E8%AF%AD%E5%8F%A5%E4%B8%AD%E9%97%B4%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88.html" title="MySQL执行一条update语句中间经历了什么">MySQL执行一条update语句中间经历了什么</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-12-23T06:01:29.000Z" title="发表于 2023-12-23 14:01:29">2023-12-23</time></span></div><div class="content">执行一条update语句中间经历了什么 UPDATE t_user SET name = &#39;xiaolin&#39; WHERE id = 1; 

执行器负责具体执行，调用存储引擎接口，通过主键索引树搜索获取id&#x3D;1这一行记录：
如果 id&#x3D;1 这一行所在的数据页本来就在 buffer pool 中，就直接返回给执行器更新；
如果记录不在 buffer pool，将数据页从磁盘读入到 buffer pool，返回记录给执行器。


执行器得到聚簇索引记录后，会看一下更新前记录和更新后记录是否一样：
如果一样的话就不进行后续更新流程；
如果不一样的话就把更新前的记录和更新后的记录都当作参数传给 InnoDB 层，让 InnoDB 真正的执行更新记录的操作；


开启事务， InnoDB层更新记录前，首先要记录相应的 undo log，因为这是更新操作，需要把被更新的列的旧值记下来，也就是要生成一条 undo log，undo log 会写入 Buffer Pool 中的 Undo 页面，不过在内存修改该 Undo 页面后，需要记录对应的 redo log。
 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/MySQL%E6%89%A7%E8%A1%8C%E4%B8%80%E6%9D%A1select%E8%AF%AD%E5%8F%A5%E6%9C%9F%E9%97%B4%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88.html" title="MySQL执行一条select语句期间发生了什么">MySQL执行一条select语句期间发生了什么</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-12-04T06:01:29.000Z" title="发表于 2023-12-04 14:01:29">2023-12-04</time></span></div><div class="content">执行一条select语句期间发生了什么MySQL分为Server层和存储引擎层。Server层负责建立连接、分析和执行 SQL，存储引擎层负责数据的存储和提取（支持InnoDB、MyISAM、Memory等多个存储引擎，不同的存储引擎共用一个Server 层）
1、连接器：首先经过TCP三次握手连接MySQL服务，连接器开始验证用户名和密码，读取权限

show processlist查看MySQL服务被多少个客户端连接

2、查询缓存（8.0后删除）：SQL语句如果是select语句，就会先去查询缓存看看之前是否执行过（kv形式存内存）。对于更新频繁的表查询缓存命中率低，一个表有更新操作那么这个表的查询缓存就会被清空，鸡肋。
3、解析SQL：解析器进行词法分析，语法分析，没问题就构建SQL语法树
4、执行SQL：预处理阶段（检查SQL语句中的表或字段是否存在，将 select * 中的 * 扩展为表上所有列）优化阶段（负责将 SQL 语句执行方案确定下来，语句前+explain可以输出SQL语句的执行计划）执行阶段（执行器和存储引擎交互，交互以记录为单位，从存储引擎读取记录，返回给客 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/CPU%20%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F%E7%9A%84%E8%BF%87%E7%A8%8B.html" title="CPU 执行程序的过程">CPU 执行程序的过程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-11-21T06:01:29.000Z" title="发表于 2023-11-21 14:01:29">2023-11-21</time></span></div><div class="content">CPU 执行程序的过程1、CPU 读取「程序计数器」的值，这个值是指令的内存地址，然后 CPU 的「控制单元」操作「地址总线」指定需要访问的内存地址，接着通知内存设备准备数据，数据准备好后通过「数据总线」将指令数据传给 CPU，CPU 收到内存传来的数据后，将这个指令数据存入到「指令寄存器」。
2、「程序计数器」的值自增，表示指向下一条指令。这个自增的大小，由 CPU 的位宽决定，比如 32 位的 CPU，指令是 4 个字节，需要 4 个内存地址存放，因此「程序计数器」的值会自增 4；
3、CPU 分析「指令寄存器」中的指令，确定指令的类型和参数，如果是计算类型的指令，就把指令交给「逻辑运算单元」运算；如果是存储类型的指令，则交由「控制单元」执行；

总结：一个程序执行的时候，CPU 会根据程序计数器里的内存地址，从内存里面把需要执行的指令读取到指令寄存器里面执行，然后根据指令长度自增，开始顺序读取下一条指令。

CPU 从程序计数器读取指令、到执行、再到下一条指令，这个过程会不断循环，直到程序执行结束，这个不断循环的过程被称为 CPU 的指令周期。
</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/InnoDB%E5%92%8CMyISAM%E5%8C%BA%E5%88%AB.html" title="InnoDB和MyISAM区别">InnoDB和MyISAM区别</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-11-18T06:01:29.000Z" title="发表于 2023-11-18 14:01:29">2023-11-18</time></span></div><div class="content">InnoDB和MyISAM区别1、InnoDB 支持事务，MyISAM不支持事务
2、InnoDB 支持外键，MyISAM 不支持
3、InnoDB 是聚集索引，MyISAM 是非聚集索引。聚簇索引的文件存放在主键索引叶子节点上，因此 InnoDB 必须要有主键，通过主键索引效率很高。但是辅助索引需两次查询，先查到主键然后再通过主键查到数据。所以主键不应过大，因为主键太大，其他索引也都会很大。而 MyISAM 是非聚集索引，数据文件是分离的，索引保存的是数据文件的指针，主键索引和辅助索引是独立的
4、InnoDB和MyISAM都支持B+树索引，但InnoDB的B+树索引的叶子节点保存数据本身，而MyISAM的B+树索引的叶子节点保存数据的物理地址，即用户数据的指针
5、InnoDB不保存表的具体行数，执行 select count(*) from table 时需要全表扫描。而MyISAM用一个变量保存了整个表的行数，执行上述语句时只需要读出该变量即可，速度快
6、InnoDB最小的锁粒度是行锁，MyISAM最小的锁粒度是表锁。一个更新语句会锁住整张表，导致其他查询和更新都会被阻塞，并 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/InnoDB%E5%A6%82%E4%BD%95%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE.html" title="InnoDB如何存储数据">InnoDB如何存储数据</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-11-18T06:01:29.000Z" title="发表于 2023-11-18 14:01:29">2023-11-18</time></span></div><div class="content">InnoDB如何存储数据InnoDB按「数据页」来读写数据，一个页默认大小16KB。数据页中的记录按主键顺序组成单向链表
页目录创建过程1、将所有记录划分成几个组；
2、每个记录组的最后一条记录就是组内最大记录，且最后一条记录的头信息中会存该组一共有多少条记录作为 n_owned字段；
3、页目录用来存每组最后一条记录的地址偏移量，这些地址偏移量会按先后顺序存起来，每组的地址偏移量也被称之为槽，每个槽相当于指针指向了不同组的最后一个记录。
查找页目录由多个槽组成，槽相当于分组记录的索引，通过槽查找记录时可以使用二分法快速定位要查询的记录在哪个槽，定位到槽后再遍历槽内所有记录从而找到对应的记录
</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/HTTPS%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B.html" title="HTTPS握手过程">HTTPS握手过程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-11-14T06:01:29.000Z" title="发表于 2023-11-14 14:01:29">2023-11-14</time></span></div><div class="content">HTTPS相比HTTP，在TCP和HTTP网络层之间加入了SSL&#x2F;TLS安全协议，加密传输。
HTTPS RSA握手过程1、客户端浏览器去DNS服务器获取此url对应的ip，然后客户端连接上服务端的443端口，发送请求到服务端，请求包括：TLS 版本号、支持的密码套件列表，以及生成的随机数（Client Random）；
2、服务端收到后，确认TLS版本是否支持，确定密码套件，生成一个随机数（Sverver Random）。保存Client Random用来后面生成密钥，返回Sverver Random、确认的TLS版本号、使用的密码套件【密钥交换算法 + 签名算法 + 对称加密算法 + 摘要算法】。为证明自己的身份，会再给客户端发数字证书

数字证书的签发：首先 CA 会把持有者公钥、用途、颁发者、有效时间等信息打成一个包，然后对这些信息进行 Hash 计算得到一个 Hash 值，CA 用自己的私钥将该 Hash 值加密，对证书做了签名；最后将 签名添加在文件证书上，形成数字证书
数字证书的校验：客户端会用同样的 Hash 算法获取该证书的 Hash值H1；通常浏览器和操作 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/HTTP.html" title="HTTP">HTTP</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-11-12T06:01:29.000Z" title="发表于 2023-11-12 14:01:29">2023-11-12</time></span></div><div class="content">HTTPHTTP处理粘包1、HTTP 协议通过设置回车符和换行符作为 HTTP header 的边界2、通过 Content-Length 字段作为 HTTP body 的边界
HTTP缓存技术对于一些重复HTTP请求，为了防止发送同样的HTTP请求，引入了缓存
强制缓存：只要浏览器判断缓存没过期，则直接用浏览器的本地缓存，浏览器决定是否使用缓存。通过请求资源的时间与 Cache-Control 中的过期时间大小，来计算出该资源是否过期
协商缓存：服务端告知客户端是否可以使用缓存，响应码是 304
与强制缓存的区别在于, 当缓存失效时客户端再次发送请求给服务器, 服务器只需要判断Etag资源是否被修改, 如果修改就返回新的资源并缓存, 否则只需要返回304状态码告诉客户端缓存依旧有效
( 只有在未能命中强制缓存时，才能发起带有协商缓存字段的请求 )
HTTP1.1的优点1、简单：header + body ，头部信息也是 key-value 简单文本的形式
2、灵活和易于扩展：各类请求方法、URI&#x2F;URL、状态码、头字段等都没被固定死，都允许开发人员自定义和扩充。
同时 HT ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/MySQL%E7%B4%A2%E5%BC%95.html" title="MySQL索引">MySQL索引</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-10-20T06:01:29.000Z" title="发表于 2023-10-20 14:01:29">2023-10-20</time></span></div><div class="content">索引索引：数据的目录
索引分类按「数据结构」分类：B+tree索引、Hash索引、Full-text索引按「物理存储」分类：聚簇索引（主键索引）、二级索引（辅助索引）按「字段特性」分类：
主键索引（建立在主键字段上的索引，通常在创建表时一起创建，一张表最多只有一个主键索引，索引列的值不允许有空值）
PRIMARY KEY (index1) USING BTREE
唯一索引（建立在 UNIQUE 字段上的索引，一张表可以有多个唯一索引，索引列的值必须唯一，但允许有空值）
UNIQUE KEY(index_1,index_2,…) 
普通索引（建在普通字段上的索引，既不要求字段为主键也不要求字段为UNIQUE）
INDEX(index_1,index_2,…) 
前缀索引（对字符类型字段的前几个字符建立的索引，前缀索引可以建立在字段类型为char&#x2F;varchar&#x2F;binary&#x2F;varbinary列上。目的：减少索引占用的存储空间，提升查询效率）
按「字段个数」分类：单列索引、联合索引（通过将多个字段组合成一个索引，最左匹配原则）
1CREATE INDEX i ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/%E6%AD%BB%E9%94%81.html" title="死锁">死锁</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-10-10T06:01:29.000Z" title="发表于 2023-10-10 14:01:29">2023-10-10</time></span></div><div class="content">锁MySQL锁1、全局锁：

开启：flush tables with read lock，执行后数据库只读
释放：unlock tables
应用场景：做全库备份
缺点：数据量大会花费时间；备份期间业务只能读而不能更新，造成业务停滞
改进：InnoDB可重复读隔离级别。在备份数据库前先开启事务，创建Read View，然后整个事务执行期间都用这个Read View，而且由于MVCC的支持，备份期间业务依然可以对数据进行更新操作

2、表级锁：

表锁：开启lock tables t_student read&#x2F;write，表锁除了会限制别的线程读写外，也会限制本线程接下来的读写操作（InnoDB实现了行级锁）

元数据锁（MDL）：为保证当用户对表执行CRUD操作时，防止其他线程对这个表结构做变更：对一张表进行 CRUD 操作时加的是读锁；做结构变更操作时加的是写锁。在事务提交后释放。
申请MDL锁的操作会形成一个队列，队列中写锁获取优先级高于读锁。一旦出现写锁等待，会阻塞后续该表的所有 CRUD 操作。所以为能安全对表结构进行变更，在变更前先要看看数据库中的长事务，是否有事 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/#content-inner">5</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://p3-pc.douyinpic.com/img/aweme-avatar/tos-cn-i-0813c001_oQVMIAnrIBEDAAPZbBAAQEAelfjxNss2b6F7Ef~c5_300x300.jpeg?from=2956013662" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">dyx</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">49</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/dangyuxin"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/dangyuxin" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://www.douyin.com/user/MS4wLjABAAAAabKSuqKzuKHByiNDDVLzJrbfB-5yw67yU4_9_9HcEjM" target="_blank" title="Douyin"><i class="fab fa-tiktok" style="color: #24292e;"></i></a><a class="social-icon" href="https://space.bilibili.com/173312348?spm_id_from=333.337.0.0" target="_blank" title="Bilibili"><i class="fab fa-bilibili" style="color: #24292e;"></i></a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/%E6%A0%B8%E5%BF%83%E8%AE%AD%E7%BB%83.html" title="核心训练">核心训练</a><time datetime="2024-05-05T07:17:33.000Z" title="发表于 2024-05-05 15:17:33">2024-05-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E5%8A%9F%E8%83%BD%E6%80%A7%E8%AE%AD%E7%BB%83.html" title="什么是功能性训练">什么是功能性训练</a><time datetime="2024-05-04T17:04:33.000Z" title="发表于 2024-05-05 01:04:33">2024-05-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/%E5%93%91%E9%93%83%E4%B8%8A%E6%96%9C%E5%8D%A7%E6%8E%A8.html" title="哑铃上斜卧推">哑铃上斜卧推</a><time datetime="2024-05-04T07:17:33.000Z" title="发表于 2024-05-04 15:17:33">2024-05-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/docker%E4%BD%BF%E7%94%A8%E4%B8%8E%E9%85%8D%E7%BD%AE.html" title="docker使用与配置">docker使用与配置</a><time datetime="2024-04-16T11:45:33.000Z" title="发表于 2024-04-16 19:45:33">2024-04-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8%20Zsh.html" title="如何安装和使用 Zsh">如何安装和使用 Zsh</a><time datetime="2024-04-11T11:45:33.000Z" title="发表于 2024-04-11 19:45:33">2024-04-11</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/MySQL/"><span class="card-category-list-name">MySQL</span><span class="card-category-list-count">10</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Redis/"><span class="card-category-list-name">Redis</span><span class="card-category-list-count">8</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%81%A5%E8%BA%AB/"><span class="card-category-list-name">健身</span><span class="card-category-list-count">3</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%81%A5%E8%BA%AB/%E5%8A%9F%E8%83%BD%E6%80%A7%E8%AE%AD%E7%BB%83/"><span class="card-category-list-name">功能性训练</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%81%A5%E8%BA%AB/%E5%8A%A8%E4%BD%9C%E8%AF%A6%E8%A7%A3/"><span class="card-category-list-name">动作详解</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%B7%A5%E5%85%B7%E5%AD%A6%E4%B9%A0/"><span class="card-category-list-name">工具学习</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><span class="card-category-list-name">操作系统</span><span class="card-category-list-count">13</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%BC%96%E7%A8%8B/"><span class="card-category-list-name">编程</span><span class="card-category-list-count">3</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size: 1.1em; color: #999">内存管理</a> <a href="/tags/git/" style="font-size: 1.23em; color: #999ea6">git</a> <a href="/tags/%E8%83%B8%E9%83%A8%E8%AE%AD%E7%BB%83/" style="font-size: 1.1em; color: #999">胸部训练</a> <a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 1.37em; color: #99a4b2">C语言</a> <a href="/tags/zsh/" style="font-size: 1.1em; color: #999">zsh</a> <a href="/tags/MySQL/" style="font-size: 1.1em; color: #999">MySQL</a> <a href="/tags/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/" style="font-size: 1.37em; color: #99a4b2">Linux系统编程</a> <a href="/tags/B-%E6%A0%91/" style="font-size: 1.1em; color: #999">B+树</a> <a href="/tags/MySQL%E6%97%A5%E5%BF%97/" style="font-size: 1.23em; color: #999ea6">MySQL日志</a> <a href="/tags/%E9%9B%B6%E6%8B%B7%E8%B4%9D/" style="font-size: 1.1em; color: #999">零拷贝</a> <a href="/tags/%E6%A0%B8%E5%BF%83%E8%AE%AD%E7%BB%83/" style="font-size: 1.1em; color: #999">核心训练</a> <a href="/tags/github/" style="font-size: 1.23em; color: #999ea6">github</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.23em; color: #999ea6">算法</a> <a href="/tags/%E5%8A%9F%E8%83%BD%E6%80%A7%E8%AE%AD%E7%BB%83/" style="font-size: 1.1em; color: #999">功能性训练</a> <a href="/tags/Linux/" style="font-size: 1.5em; color: #99a9bf">Linux</a> <a href="/tags/docker/" style="font-size: 1.1em; color: #999">docker</a> <a href="/tags/MySQL%E4%BA%8B%E5%8A%A1/" style="font-size: 1.1em; color: #999">MySQL事务</a> <a href="/tags/%E9%94%81/" style="font-size: 1.23em; color: #999ea6">锁</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><span class="card-archive-list-count">3</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">49</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">46.3k</div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-05-04T18:54:00.897Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://dyx-bucket.oss-cn-beijing.aliyuncs.com/2e339a3a385a4fcb89e102016eb40b61.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By dyx</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.umd.js?v=5.0.33"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('/pluginsSrc/typed.js/dist/typed.umd.js?v=2.1.0').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["今日事&#44;今日毕","学会与自己和解","怀古莫要伤今，行走世间，本就是一种积累"])
  } else {
    document.getElementById("subtitle").textContent = "今日事&#44;今日毕"
  }
}
typedJSFn.run(subtitleType)</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="/pluginsSrc/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js?v=1.1.3"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/pluginsSrc/butterfly-extsrc/dist/canvas-nest.min.js?v=1.1.3"></script><script id="click-heart" src="/pluginsSrc/butterfly-extsrc/dist/click-heart.min.js?v=1.1.3" async="async" mobile="true"></script><script src="/pluginsSrc/pjax/pjax.min.js?v=0.2.8"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script></div></body></html>